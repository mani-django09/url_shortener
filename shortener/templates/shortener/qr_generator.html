{% extends 'base.html' %}

{% block title %}Professional QR Code Generator - Bitly{% endblock %}

{% block extra_css %}
<style>
    :root {
        --primary-color: #4a90e2;
        --secondary-color: #5c6bc0;
        --accent-color: #f39c12;
        --text-color: #333333;
        --background-color: #f8f9fa;
    }

    body {
        font-family: 'Roboto', sans-serif;
        color: var(--text-color);
        background-color: var(--background-color);
    }

    .hero-section {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        color: #ffffff;
        padding: 3rem 0;
        text-align: center;
    }

    .hero-title {
        font-size: 3.0rem;
        font-weight: 550;
        margin-bottom: 1.5rem;
    }

    .hero-subtitle {
        font-size: 1.5rem;
        margin-bottom: 2rem;
        opacity: 0.9;
    }

    .qr-container {
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        padding: 2rem;
        margin-top: -4rem;
    }

    .qr-container:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
    }

    .qr-preview {
        min-height: 250px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px dashed #e0e0e0;
        border-radius: 10px;
        margin: 20px 0;
        padding: 20px;
        background-color: #f8f9fa;
        transition: all 0.3s ease;
    }

    .qr-preview:hover {
        border-color: var(--primary-color);
        background-color: #ffffff;
    }

    .qr-preview img {
        max-width: 100%;
        height: auto;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .feature-card {
        background-color: #ffffff;
        border-radius: 12px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
    }

    .feature-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }

    .feature-icon {
        font-size: 3rem;
        color: var(--primary-color);
        margin-bottom: 1.5rem;
    }

    .color-picker-wrapper {
        display: flex;
        gap: 15px;
        margin: 20px 0;
        justify-content: center;
    }

    .color-option {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        border: 3px solid transparent;
        transition: all 0.3s ease;
    }

    .color-option:hover {
        transform: scale(1.1);
    }

    .color-option.selected {
        border-color: var(--primary-color);
        transform: scale(1.1);
    }

    .faq-section {
        background-color: #ffffff;
        padding: 4rem 0;
    }

    .faq-item {
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        margin-bottom: 1rem;
    }

    .faq-question {
        cursor: pointer;
        transition: background-color 0.3s ease;
        padding: 1.5rem;
    }

    .faq-question:hover {
        background-color: #f1f3f5;
    }

    .faq-answer {
        border-top: 1px solid #edf2f7;
        padding: 1.5rem;
        background-color: #ffffff;
    }

    .use-cases {
        background-color: #f8f9fa;
        padding: 4rem 0;
    }

    .use-case-item {
        background-color: #ffffff;
        border-radius: 10px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
    }

    .use-case-item:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
    }

    .use-case-icon {
        font-size: 2.5rem;
        color: var(--primary-color);
        margin-bottom: 1.5rem;
    }

    .cta-section {
        background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%);
        color: #ffffff;
        padding: 6rem 0;
        text-align: center;
    }

    .cta-title {
        font-size: 2.5rem;
        font-weight: 500;
        margin-bottom: 1.5rem;
    }

    .cta-subtitle {
        font-size: 1.3rem;
        margin-bottom: 2rem;
        opacity: 0.9;
    }

    .btn-cta {
        background-color: var(--accent-color);
        border: none;
        color: #ffffff;
        padding: .5rem 2.5rem;
        font-size: 1.2rem;
        font-weight: 500;
        transition: all 0.3s ease;
        border-radius: 50px;
    }

    .btn-cta:hover {
        background-color: #e67e22;
        transform: translateY(-2px);
    }

    .statistics {
        background-color: #ffffff;
        padding: 4rem 0;
    }

    .stat-item {
        text-align: center;
        padding: 2rem;
    }

    .stat-number {
        font-size: 3rem;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 1rem;
    }

    .stat-label {
        font-size: 1.2rem;
        color: var(--text-color);
    }

    .info-section {
        background-color: #ffffff;
        padding: 1rem 0 4rem 0; /* Increased top padding from 4rem to 8rem */
        margin-top: -1rem;
        position: relative;
        z-index: 10;
    }
    .info-section .container {
        margin-top: 2rem;
    }
    .info-card {
        background-color: #f8f9fa;
        border-radius: 12px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
    }

    .info-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }

    .info-icon {
        font-size: 2.5rem;
        color: var(--primary-color);
        margin-bottom: 1rem;
    }

    .info-title {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 1rem;
    }

    .info-text {
        font-size: 1rem;
        color: var(--text-color);
    }

    .step {
        display: flex;
        align-items: flex-start;
        margin-bottom: 1rem;
    }

    .step-number {
        background-color: var(--primary-color);
        color: #ffffff;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        margin-right: 1rem;
        flex-shrink: 0;
    }

    .step-content {
        flex-grow: 1;
    }
</style>
{% endblock %}

{% block content %}
<div class="hero-section">
    <div class="container">
        <h1 class="hero-title">Create QR Codes in Seconds</h1>
        <p class="hero-subtitle">Empower your business with our advanced QR code generator</p>
    </div>
</div>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="qr-container">
                <form id="qrForm" class="mb-4">
                    <div class="form-group">
                        <label for="content">Enter URL or Text</label>
                        <input type="text" class="form-control form-control-lg" id="content" 
                               placeholder="Enter URL or text to generate QR code" required>
                    </div>

                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>QR Code Size</label>
                                <select class="form-control" id="qrSize">
                                    <option value="100">Small (100×100)</option>
                                    <option value="200" selected>Medium (200×200)</option>
                                    <option value="300">Large (300×300)</option>
                                    <option value="400">Extra Large (400×400)</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Error Correction Level</label>
                                <select class="form-control" id="errorCorrection">
                                    <option value="L">Low</option>
                                    <option value="M" selected>Medium</option>
                                    <option value="Q">High</option>
                                    <option value="H">Very High</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>QR Code Color</label>
                                <div class="color-picker-wrapper">
                                    <div class="color-option selected" style="background-color: #000000" data-color="000000"></div>
                                    <div class="color-option" style="background-color: #4a90e2" data-color="4a90e2"></div>
                                    <div class="color-option" style="background-color: #27ae60" data-color="27ae60"></div>
                                    <div class="color-option" style="background-color: #e74c3c" data-color="e74c3c"></div>
                                    <div class="color-option" style="background-color: #8e44ad" data-color="8e44ad"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-lg btn-block mt-4">
                        <span class="normal-state">Generate QR Code</span>
                        <span id="loadingSpinner" class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="display: none;"></span>
                    </button>
                </form>

                <div class="qr-preview" id="qrPreview">
                    <p class="text-muted">Your QR code will appear here</p>
                </div>

                <div id="qrActions" style="display: none;" class="text-center">
                    <button class="btn btn-success mr-2" onclick="downloadQR()">
                        <i class="fas fa-download mr-2"></i>Download QR Code
                    </button>
                    <button class="btn btn-info" onclick="shareQR()">
                        <i class="fas fa-share-alt mr-2"></i>Share
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="info-section info-section-spacing">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <div class="info-card">
                        <div class="info-icon">
                            <i class="fas fa-qrcode"></i>
                        </div>
                        <h2 class="info-title">What is a QR Code?</h2
                        <p class="info-text">A QR (Quick Response) code is a two-dimensional barcode that can be scanned using a smartphone camera. It can store various types of information such as website URLs, plain text, contact information, or even Wi-Fi network details. QR codes have become increasingly popular due to their versatility and ease of use in marketing, information sharing, and contactless interactions.</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="info-card">
                        <div class="info-icon">
                            <i class="fas fa-magic"></i>
                        </div>
                        <h2 class="info-title">How to Use the Free QR Code Generator</h2>
                        <div class="info-text">
                            <div class="step">
                                <div class="step-number">1</div>
                                <div class="step-content">Enter your URL or text in the input field below.</div>
                            </div>
                            <div class="step">
                                <div class="step-number">2</div>
                                <div class="step-content">Choose your desired QR code size and error correction level.</div>
                            </div>
                            <div class="step">
                                <div class="step-number">3</div>
                                <div class="step-content">Select a color for your QR code to match your branding.</div>
                            </div>
                            <div class="step">
                                <div class="step-number">4</div>
                                <div class="step-content">Click the "Generate QR Code" button to create your custom QR code.</div>
                            </div>
                            <div class="step">
                                <div class="step-number">5</div>
                                <div class="step-content">Download or share your newly generated QR code.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-5">
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-palette"></i>
                </div>
                <h3>Custom Design</h3>
                <p>Create unique QR codes with custom colors and sizes to match your brand identity.</p>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h3>Analytics Integration</h3>
                <p>Track scans and gain insights into user behavior with our built-in analytics.</p>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <h3>Mobile Optimized</h3>
                <p>Ensure smooth scanning experiences across all mobile devices and platforms.</p>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3>Dynamic QR Codes</h3>
                <p>Create editable QR codes that can be updated anytime without reprinting.</p>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-qrcode"></i>
                </div>
                <h3>Bulk Generation</h3>
                <p>Generate multiple QR codes at once for large-scale marketing campaigns.</p>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <h3>Password Protection</h3>
                <p>Secure your QR codes with password protection for sensitive information.</p>
            </div>
        </div>
    </div>
</div>

<div class="use-cases">
    <div class="container">
        <h2 class="text-center mb-5">Innovative QR Code Use Cases</h2>
        <div class="row">
            <div class="col-md-4">
                <div class="use-case-item">
                    <div class="use-case-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <h4>Contactless Menus</h4>
                    <p>Revolutionize dining experiences with digital menus accessible via QR codes, enhancing safety and flexibility.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="use-case-item">
                    <div class="use-case-icon">
                        <i class="fas fa-map-marked-alt"></i>
                    </div>
                    <h4>Interactive Tourism</h4>
                    <p>Create self-guided tours with QR codes at landmarks, providing rich multimedia content to tourists.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="use-case-item">
                    <div class="use-case-icon">
                        <i class="fas fa-ticket-alt"></i>
                    </div>
                    <h4>Event Management</h4>
                    <p>Streamline event check-ins and provide instant access to schedules and information through QR codes.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="statistics">
    <div class="container">
        <h2 class="text-center mb-5">Our Impact in Numbers</h2>
        <div class="row">
            <div class="col-md-3">
                <div class="stat-item">
                    <div class="stat-number" data-count="1000000">0</div>
                    <div class="stat-label">QR Codes Generated</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-item">
                    <div class="stat-number" data-count="5000000">0</div>
                    <div class="stat-label">Monthly Scans</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-item">
                    <div class="stat-number" data-count="50000">0</div>
                    <div class="stat-label">Happy Customers</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-item">
                    <div class="stat-number" data-count="99">0</div>
                    <div class="stat-label">Countries Reached</div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="faq-section">
    <div class="container">
        <h2 class="text-center mb-5">Frequently Asked Questions</h2>
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="faq-container">
                    {% for faq in faqs %}
                    <div class="faq-item mb-3" data-faq-id="{{ forloop.counter }}">
                        <div class="faq-question d-flex justify-content-between align-items-center p-3 bg-white rounded cursor-pointer">
                            <h5 class="mb-0">{{ faq.question }}</h5>
                            <i class="fas fa-chevron-down transition-transform"></i>
                        </div>
                        <div class="faq-answer bg-white rounded-bottom p-3" style="display: none;">
                            <p class="mb-0">{{ faq.answer }}</p>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>

<div class="cta-section">
    <div class="container">
        <h2 class="cta-title">Ready to Revolutionize Your Marketing?</h2>
        <p class="cta-subtitle">Join thousands of businesses using our QR code generator to boost engagement and drive results.</p>
        <a href="#qrForm" class="btn btn-cta">Create Your QR Code Now</a>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const faqItems = document.querySelectorAll('.faq-item');
        const qrForm = document.getElementById('qrForm');
        const colorOptions = document.querySelectorAll('.color-option');
        let selectedColor = '000000';
    
        // Color picker functionality
        colorOptions.forEach(option => {
            option.addEventListener('click', function() {
                colorOptions.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                selectedColor = this.getAttribute('data-color');
                if (document.querySelector('#qrPreview img')) {
                    generateQRCode();
                }
            });
        });
    
        // FAQ functionality
        faqItems.forEach(item => {
            const question = item.querySelector('.faq-question');
            const answer = item.querySelector('.faq-answer');
            const icon = item.querySelector('.fa-chevron-down');
            
            question.addEventListener('click', () => {
                const isOpen = answer.style.display === 'block';
                
                faqItems.forEach(otherItem => {
                    const otherAnswer = otherItem.querySelector('.faq-answer');
                    const otherIcon = otherItem.querySelector('.fa-chevron-down');
                    
                    otherAnswer.style.display = 'none';
                    otherIcon.classList.remove('rotate-icon');
                    otherItem.classList.remove('active');
                });
                
                if (!isOpen) {
                    answer.style.display = 'block';
                    icon.classList.add('rotate-icon');
                    item.classList.add('active');
                    answer.classList.add('show');
                }
            });
        });
    
        qrForm.addEventListener('submit', function(e) {
            e.preventDefault();
            generateQRCode();
        });
    
        function generateQRCode() {
            const content = document.getElementById('content').value;
            const size = document.getElementById('qrSize').value;
            const errorCorrection = document.getElementById('errorCorrection').value;
            const qrPreview = document.getElementById('qrPreview');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const normalState = document.querySelector('.normal-state');
    
            if (!content) return;
    
            loadingSpinner.style.display = 'inline-block';
            normalState.style.display = 'none';
            qrPreview.innerHTML = '<div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div>';
    
            const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?data=${encodeURIComponent(content)}&size=${size}x${size}&ecc=${errorCorrection}&color=${selectedColor}`;
    
            const img = new Image();
            img.src = qrUrl;
            img.alt = 'QR Code';
            img.onload = function() {
                qrPreview.innerHTML = '';
                qrPreview.appendChild(img);
                document.getElementById('qrActions').style.display = 'block';
                loadingSpinner.style.display = 'none';
                normalState.style.display = 'inline';
            };
            img.onerror = function() {
                qrPreview.innerHTML = '<p class="text-danger">Error generating QR code. Please try again.</p>';
                loadingSpinner.style.display = 'none';
                normalState.style.display = 'inline';
            };
        }

        document.getElementById('qrSize').addEventListener('change', function() {
            if (document.querySelector('#qrPreview img')) {
                generateQRCode();
            }
        });

        document.getElementById('errorCorrection').addEventListener('change', function() {
            if (document.querySelector('#qrPreview img')) {
                generateQRCode();
            }
        });

        // Animate statistics
        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start).toLocaleString();
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    const statNumbers = document.querySelectorAll('.stat-number');
                    statNumbers.forEach((statNumber) => {
                        const end = parseInt(statNumber.getAttribute('data-count'));
                        animateValue(statNumber, 0, end, 2000);
                    });
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });

        const statistics = document.querySelector('.statistics');
        observer.observe(statistics);
    });
    
    function downloadQR() {
        const qrImage = document.querySelector('#qrPreview img');
        if (!qrImage) return;
    
        fetch(qrImage.src)
            .then(response => response.blob())
            .then(blob => {
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'qrcode.png';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
            })
            .catch(error => {
                console.error('Error downloading QR code:', error);
                showNotification('Error downloading QR code. Please try again.', 'error');
            });
    }
    
    function shareQR() {
        const qrImage = document.querySelector('#qrPreview img');
        if (!qrImage) return;
    
        if (navigator.share) {
            fetch(qrImage.src)
                .then(response => response.blob())
                .then(blob => {
                    const file = new File([blob], 'qrcode.png', { type: 'image/png' });
                    navigator.share({
                        title: 'QR Code',
                        text: 'Check out this QR code!',
                        files: [file]
                    }).catch(error => {
                        if (error.name !== 'AbortError') {
                            console.error('Error sharing QR code:', error);
                            showNotification('Error sharing QR code. Please try again.', 'error');
                        }
                    });
                });
        } else {
            const shareUrl = document.querySelector('#content').value;
            window.open(`https://twitter.com/intent/tweet?text=Check%20out%20this%20QR%20code!&url=${encodeURIComponent(shareUrl)}`);
        }
    }
    
    function showNotification(message, type) {
        const notification = $(`
            <div class="notification notification-${type}">
                <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
                ${message}
            </div>
        `).appendTo('body');
    
        setTimeout(() => {
            notification.fadeOut(300, function() {
                $(this).remove();
            });
        }, 3000);
    }
</script>
{% endblock %}

